# FRAMEWORK_PLAN_PROTOCOL.md

Gather requirements and plan framework improvements through exploration and specification.

## Protocol Activation

```text
@FRAMEWORK_PLAN [command] [arguments]
```

## Commands

```text
explore                 → Interactive exploration of framework needs
generate                → Generate requirements from exploration or analysis
list                    → Show all framework requirements
status                  → Display current planning state
validate [id]          → Check requirements completeness
archive [id]           → Move completed requirements to archive
```

## Process Flow

```text
1. Explore framework improvement needs
2. Generate requirements document
3. Validate and refine
4. Hand off to DEVELOP protocol
```

## Command Details

### Explore Command

Interactive discovery of framework needs:

```bash
@FRAMEWORK_PLAN explore
```

Output:
```
Starting framework exploration session...

Current Framework: v001
Previous Analysis: ANALYSIS-001 available (3 insights)

What aspect of the framework needs improvement?
> [User describes need]

Let me help explore this. What specific problems are you experiencing?
> [Interactive dialogue continues]
```

The exploration covers:
- Current pain points
- API design needs
- Performance requirements
- Developer experience goals
- Success metrics

### Generate Command

Create requirements from exploration or analysis:

```bash
@FRAMEWORK_PLAN generate
```

Actions:
1. Creates new cycle directory
2. Generates REQUIREMENTS-XXX-[TITLE].md
3. Uses FRAMEWORK_REQUIREMENTS_TEMPLATE.md
4. Incorporates exploration insights
5. Sets status to DRAFT

Output:
```
Generated: FrameworkWorkspace/CYCLE-002-BATCH-OPERATIONS/REQUIREMENTS-002-BATCH-OPERATIONS.md
Status: DRAFT
Priority: HIGH (based on 3 application requests)

Key Requirements:
- REQ-001: Batch save operations for DataStore
- REQ-002: Batch delete with transaction support
- REQ-003: Performance optimization for >100 items

Next: Review requirements, then @FRAMEWORK_DEVELOP start 002
```

### List Command

Show all framework requirements:

```bash
@FRAMEWORK_PLAN list
```

Output:
```
Framework Requirements:

ACTIVE:
  CYCLE-002-BATCH-OPERATIONS/
    └── REQUIREMENTS-002-BATCH-OPERATIONS.md (APPROVED)
        Priority: HIGH | 3 requirements | Started: 2024-01-20

DRAFT:
  CYCLE-003-ASYNC-TESTING/
    └── REQUIREMENTS-003-ASYNC-TESTING.md (DRAFT)
        Priority: MEDIUM | 5 requirements | Created: 2024-01-25

COMPLETED:
  CYCLE-001-FOUNDATION-ARCHITECTURE/
    └── REQUIREMENTS-001-FOUNDATION-ARCHITECTURE.md (COMPLETED)
        12 requirements | Implemented v001
```

### Status Command

Display planning state:

```bash
@FRAMEWORK_PLAN status
```

Output:
```
Framework Planning Status

Current Version: v001
Active Development: CYCLE-002-BATCH-OPERATIONS (in progress)
Pending Analysis: 2 application analyses with insights

Insights Queue:
1. Batch operations needed (HIGH) - from 3 applications
2. Async test utilities (MEDIUM) - from 2 applications
3. Migration support (LOW) - from 1 application

Suggested Actions:
- Complete CYCLE-002 development
- Plan CYCLE-003 for async testing
- Review pending analyses: @FRAMEWORK_ANALYZE generate
```

### Validate Command

Check requirements completeness:

```bash
@FRAMEWORK_PLAN validate 002
```

Output:
```
Validating REQUIREMENTS-002-BATCH-OPERATIONS...

✓ Metadata complete
✓ All requirements have acceptance criteria
✓ Test strategies defined
✓ API designs included
✗ Missing performance benchmarks for REQ-003
✗ Migration plan not specified

Status: INCOMPLETE (2 issues)
Fix issues before approval
```

### Archive Command

Move completed requirements:

```bash
@FRAMEWORK_PLAN archive 001
```

Output:
```
Archiving REQUIREMENTS-001-FOUNDATION-ARCHITECTURE...

✓ Implementation complete in v001
✓ Documentation generated
✓ All tests passing

Archived to: FrameworkArchive/CYCLE-001-FOUNDATION-ARCHITECTURE/
Status updated: COMPLETED
```

## Technical Details

### Paths

```text
FrameworkWorkspace: /Users/tojkuv/Documents/GitHub/axiom-apple/workspace-meta-workspace/workspaces/FrameworkWorkspace
FrameworkArchive: /Users/tojkuv/Documents/GitHub/axiom-apple/workspace-meta-workspace/workspaces/FrameworkArchive
Templates: /Users/tojkuv/Documents/GitHub/axiom-apple/workspace-meta-workspace/workspaces/templates/
```

### Cycle Structure

```text
FrameworkWorkspace/
└── CYCLE-XXX-[TITLE]/
    ├── REQUIREMENTS-XXX-[TITLE].md        # Generated by PLAN
    ├── SESSIONS/                          # Created by DEVELOP
    │   └── FW-SESSION-XXX.md
    ├── DOCUMENTATION-XXX.md               # Created by DOCUMENT
    └── ANALYSIS-XXX.md                    # Created by ANALYZE
```

### Requirement States

- **DRAFT**: Being refined, can be edited
- **APPROVED**: Ready for development
- **IN_PROGRESS**: Currently being implemented
- **COMPLETED**: Fully implemented and documented
- **DEPRECATED**: Superseded by newer approach

### Priority Levels

- **CRITICAL**: Blocking multiple applications
- **HIGH**: Significant developer friction
- **MEDIUM**: Quality of life improvement
- **LOW**: Nice to have enhancement

## Requirements Gathering

### From Application Analysis

Automatic insight extraction:
```bash
# After application analysis completes
@FRAMEWORK_ANALYZE generate

# Review insights
@FRAMEWORK_PLAN explore
# System pre-loads insights for discussion
```

### From Direct Feedback

Developer-initiated improvements:
```bash
@FRAMEWORK_PLAN explore
> "The DataStore API is too verbose for simple operations"
# Interactive refinement of the need
```

### From Performance Data

Metric-driven requirements:
```bash
@FRAMEWORK_PLAN explore
> "Filter operations degrade at 1000+ items"
# System helps define performance requirements
```

## Integration Points

### Inputs
- Application ANALYSIS files (insights)
- Previous framework ANALYSIS
- Direct developer feedback
- Performance metrics

### Outputs
- REQUIREMENTS-XXX-[TITLE].md
- Feeds into FRAMEWORK_DEVELOP

### Dependencies
- FRAMEWORK_REQUIREMENTS_TEMPLATE.md
- Existing framework version
- Application validation data

## Workflow Examples

### First Cycle

```bash
# 1. Start fresh
@FRAMEWORK_PLAN explore
# Discuss foundation architecture needs

# 2. Generate initial requirements
@FRAMEWORK_PLAN generate

# 3. Validate completeness
@FRAMEWORK_PLAN validate 001

# 4. Begin development
@FRAMEWORK_DEVELOP start 001
```

### Insight-Driven Cycle

```bash
# 1. Review application insights
cat ApplicationWorkspace/*/ANALYSIS-*.md | grep "Framework Need"

# 2. Explore highest priority
@FRAMEWORK_PLAN explore
# System shows: "3 apps need batch operations"

# 3. Generate focused requirements
@FRAMEWORK_PLAN generate

# 4. Fast-track high-priority items
@FRAMEWORK_DEVELOP start 002
```

### Multi-Cycle Planning

```bash
# 1. List all requirements
@FRAMEWORK_PLAN list

# 2. Check active development
@FRAMEWORK_DEVELOP status 002

# 3. Plan next cycle
@FRAMEWORK_PLAN explore
# Reference learnings from current cycle
```

## Error Handling

### No Analysis Available
```
Error: No application analyses found
Recovery: Run at least one application cycle first
Alternate: Use explore for direct requirement gathering
```

### Conflicting Requirements
```
Error: REQ-003 conflicts with existing API design
Options:
1. Create breaking change for v2
2. Design backward-compatible approach
3. Defer to future major version
```

### Incomplete Validation
```
Error: Requirements missing key sections
Required: Test strategy, migration plan, API design
Fix: Add missing sections before approval
```

## Best Practices

1. **Ground requirements in real needs** - Every requirement should address actual developer pain

2. **Validate with application evidence** - Reference specific friction points from analyses

3. **Design for testability** - Include test strategies in requirements

4. **Consider migration impact** - Plan how existing code will adapt

5. **Keep cycles focused** - 3-5 related requirements per cycle for manageable scope